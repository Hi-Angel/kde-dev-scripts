#compdef kcmshell=kcmshell appletproxy=appletproxy

local i tmp dir flags
if [ "$service" = "kcmshell" ]; then
	dir="applnk/Settings";
	flags=":t:r";
else
	dir="apps/kicker/applets";
	flags=":t"
fi
for i in `echo $KDEDIRS | sed 's,:, ,'` $KDEHOME; do
	tmp=($i/share/$dir/**/*.desktop($flags))
	compadd -a tmp
done

return 1
